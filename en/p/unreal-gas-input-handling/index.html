<!DOCTYPE html>
<html lang="en" dir="ltr">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='This post is a summary of lectures by 이득우 and documents compiled by other developers. For detailed and accurate information, please refer to the provided links. Series Unreal GAS Overview Getting Started with Unreal GAS Unreal GAS Input Handling &amp;lt;- Current Post In this post, we will explore how to trigger abilities (such as jump and attack) based on user input. OwnerActor and AvatarActor In the Gameplay Ability'>
<title>Unreal GAS Input Handling</title>

<link rel='canonical' href='https://sangho0n.github.io/en/p/unreal-gas-input-handling/'>

<link rel="stylesheet" href="/scss/style.min.abbd69b2908fdfcd5179898beaafd374514a86538d81639ddd2c58c06ae54e40.css"><meta property='og:title' content='Unreal GAS Input Handling'>
<meta property='og:description' content='This post is a summary of lectures by 이득우 and documents compiled by other developers. For detailed and accurate information, please refer to the provided links. Series Unreal GAS Overview Getting Started with Unreal GAS Unreal GAS Input Handling &amp;lt;- Current Post In this post, we will explore how to trigger abilities (such as jump and attack) based on user input. OwnerActor and AvatarActor In the Gameplay Ability'>
<meta property='og:url' content='https://sangho0n.github.io/en/p/unreal-gas-input-handling/'>
<meta property='og:site_name' content='sanghoon&#39;s dev-log'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Unreal' /><meta property='article:tag' content='언리얼' /><meta property='article:tag' content='UE' /><meta property='article:tag' content='GAS' /><meta property='article:tag' content='Ability' /><meta property='article:published_time' content='2024-03-26T22:19:41&#43;09:00'/><meta property='article:modified_time' content='2024-03-26T22:19:41&#43;09:00'/><meta property='og:image' content='https://sangho0n.github.io/en/p/unreal-gas-input-handling/img/unreal.svg' />
<meta name="twitter:title" content="Unreal GAS Input Handling">
<meta name="twitter:description" content="This post is a summary of lectures by 이득우 and documents compiled by other developers. For detailed and accurate information, please refer to the provided links. Series Unreal GAS Overview Getting Started with Unreal GAS Unreal GAS Input Handling &amp;lt;- Current Post In this post, we will explore how to trigger abilities (such as jump and attack) based on user input. OwnerActor and AvatarActor In the Gameplay Ability"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://sangho0n.github.io/en/p/unreal-gas-input-handling/img/unreal.svg' />
    </head>
    <body class="
    article-page
    ">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky ">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header>
        
            
            <figure class="site-avatar">
                <a href="/en/">
                
                    
                    
                    
                        
                        <img src="/avatar_hufa2a3a1a2b6d47cfb712fe4c06494714_9812_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">😀</span>
                
            </figure>
            
        
        
        <div class="site-meta">
            <h1 class="site-name"><a href="/en">sanghoon&#39;s dev-log</a></h1>
            <h2 class="site-description">Welcome to my blog!</h2>
        </div>
    </header><ol class="social-menu">
            
                <li>
                    <a 
                        href='https://github.com/sangho0n'
                        target="_blank"
                        title="GitHub"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                        
                    </a>
                </li>
            
                <li>
                    <a 
                        href='https://www.instagram.com/sanghoon_eat/'
                        target="_blank"
                        title="Instagram"
                        rel="me"
                    >
                        
                        
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/></svg>
                        
                    </a>
                </li>
            
        </ol><ol class="menu" id="main-menu">
        
        
        
        <li >
            <a href='/en/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>Home</span>
            </a>
        </li>
        
        
        <li >
            <a href='/en/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>Search</span>
            </a>
        </li>
        
        
        <li >
            <a href='/en/about/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>About</span>
            </a>
        </li>
        
        
        <li >
            <a href='/en/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>Archives</span>
            </a>
        </li>
        

        <div class="menu-bottom-section">
                <li id="i18n-switch">  
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



                    <select name="language" onchange="window.location.href = this.selectedOptions[0].value">
                        
                            <option value="https://sangho0n.github.io/ko/" >한국어</option>
                        
                            <option value="https://sangho0n.github.io/en/" selected>English</option>
                        
                    </select>
                </li>
            
            
            
                <li id="dark-mode-toggle">
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                    <span></span>
                </li>
            
        </div>
    </ol>
</aside>

    <aside class="sidebar right-sidebar sticky">
        
            
                
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title"></h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#owneractor-and-avataractor">OwnerActor and AvatarActor</a></li>
    <li><a href="#fgameplayabilityspec-and-fgameplayabilityspechandle">FGameplayAbilitySpec and FGameplayAbilitySpecHandle</a></li>
    <li><a href="#inputid">InputID</a></li>
    <li><a href="#instancingpolicy">InstancingPolicy</a></li>
    <li><a href="#ability-task-and-gameplay-cue">Ability Task and Gameplay Cue</a></li>
    <li><a href="#debugging">Debugging</a></li>
    <li><a href="#final-result">Final Result</a></li>
  </ol>
</nav>
        </div>
    </section>

            
        
    </aside>


            <main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/en/p/unreal-gas-input-handling/">
                
                    <img src="/en/p/unreal-gas-input-handling/img/unreal.svg" loading="lazy" alt="Featured image of post Unreal GAS Input Handling" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/en/categories/unreal/" >
                Unreal
            </a>
        
    </header>
    

    <div class="article-title-wrapper">
        <h2 class="article-title">
            <a href="/en/p/unreal-gas-input-handling/">Unreal GAS Input Handling</a>
        </h2>
    
        
    </div>

    
    
    
    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">2024-03-26</time>
            </div>
        

    </footer>
    

    
        <footer class="article-translations">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-language" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M4 5h7" />
  <path d="M9 3v2c0 4.418 -2.239 8 -5 8" />
  <path d="M5 9c-.003 2.144 2.952 3.908 6.7 4" />
  <path d="M12 20l4 -9l4 9" />
  <path d="M19.1 18h-6.2" />
</svg>



            <div>
                
                    <a href="https://sangho0n.github.io/ko/p/%EC%96%B8%EB%A6%AC%EC%96%BC-gas-%EC%9E%85%EB%A0%A5%EC%B2%98%EB%A6%AC/" class="link">한국어</a>
                
            </div>
        </footer>
    
</div>

</header>

    <section class="article-content">
    
    
    <p><a class="link" href="https://www.inflearn.com/course/%EC%9D%B4%EB%93%9D%EC%9A%B0-%EC%96%B8%EB%A6%AC%EC%96%BC-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%98%EB%B0%8D-part-4"  target="_blank" rel="noopener"
    >This post is a summary of lectures by 이득우</a> and <a class="link" href="https://github.com/tranek/GASDocumentation"  target="_blank" rel="noopener"
    >documents compiled by other developers</a>.</p>
<p>For detailed and accurate information, please refer to the provided links.</p>
<p>Series</p>
<ul>
<li><a class="link" href="../unreal-gas-overview/" >Unreal GAS Overview</a></li>
<li><a class="link" href="../unreal-gas-start/" >Getting Started with Unreal GAS</a></li>
<li><a class="link" href="../unreal-gas-input-handling/" >Unreal GAS Input Handling</a> &lt;- Current Post</li>
</ul>
<hr>
<p>In this post, we will explore how to trigger abilities (such as jump and attack) based on user input.</p>
<h2 id="owneractor-and-avataractor">OwnerActor and AvatarActor</h2>
<p>In the Gameplay Ability System, OwnerActor refers to the actor that has the AbilitySystemComponent. In contrast, AvatarActor refers to the physical representation of the AbilitySystemComponent.</p>
<p>As seen in the previous post, OwnerActor and AvatarActor can be set to the same actor.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// For simple cases
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">InitAbilityActorInfo</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Since a character&rsquo;s abilities are usually triggered based on the current state, it is common to set PlayerState as the OwnerActor. In this post, we will attach the ability system to the PlayerState and set the OwnerActor and AvatarActor accordingly.
(Note: Both actors must implement IAbilitySystemInterface even if Owner and Avatar are different.)</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Owner class
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">AABGASPlayerState</span><span class="o">::</span><span class="n">AABGASPlayerState</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">AbilitySystemComponent</span> <span class="o">=</span> <span class="n">CreateDefaultSubobject</span><span class="o">&lt;</span><span class="n">UAbilitySystemComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;AbiltiySystemComponent&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// AbilitySystemComponent-&gt;SetIsReplicated(true);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UAbilitySystemComponent</span><span class="o">*</span> <span class="n">AABGASPlayerState</span><span class="o">::</span><span class="n">GetAbilitySystemComponent</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">AbilitySystemComponent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Avatar class
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">AABGASCharacterPlayer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">AbilitySystemComponent</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="c1">//AbilitySystemComponent-&gt;SetIsReplicated(true);
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UAbilitySystemComponent</span><span class="o">*</span> <span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">GetAbilitySystemComponent</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">AbilitySystemComponent</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">PossessedBy</span><span class="p">(</span><span class="n">AController</span><span class="o">*</span> <span class="n">NewController</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Super</span><span class="o">::</span><span class="n">PossessedBy</span><span class="p">(</span><span class="n">NewController</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">_PlayerState</span> <span class="o">=</span> <span class="n">GetPlayerState</span><span class="o">&lt;</span><span class="n">AABGASPlayerState</span><span class="o">&gt;</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">_PlayerState</span><span class="o">-&gt;</span><span class="n">IsValidLowLevelFast</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// Both the Avatar and PlayerState actors have an Ability System Component, but the Avatar&#39;s component is just a reference to the Owner&#39;s component.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">AbilitySystemComponent</span> <span class="o">=</span> <span class="n">_PlayerState</span><span class="o">-&gt;</span><span class="n">GetAbilitySystemComponent</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">        <span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">InitAbilityActorInfo</span><span class="p">(</span><span class="n">_PlayerState</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// do sth...
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        
</span></span><span class="line"><span class="cl"><span class="c1">// NOTE: In multiplayer games, InitAbilityActorInfo needs to be called in a different position!
</span></span></span><span class="line"><span class="cl"><span class="c1">// (PossessedBy method is only called on the server)
</span></span></span><span class="line"><span class="cl"><span class="c1">// For now, this is a single-player example, so when the controller possesses the pawn
</span></span></span><span class="line"><span class="cl"><span class="c1">// the InitAbilityActorInfo of the ability system is called
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>Furthermore, since PlayerState is a class that easily facilitates pub-sub between the server and clients, it is advisable to set the PlayerState class as the Owner in multiplayer game development.</p>
<h2 id="fgameplayabilityspec-and-fgameplayabilityspechandle">FGameplayAbilitySpec and FGameplayAbilitySpecHandle</h2>
<p>As seen in the previous post, in order to grant abilities to the AbilitySystemComponent, you need to create and register an instance of the FGameplayAbilitySpec structure. You can register the created instance using the GiveAbility or GiveAbilityAndActivateOnce methods.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// Grant ability to the ability system component
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">Element</span> <span class="p">:</span> <span class="n">Abilities</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">FGameplayAbilitySpec</span> <span class="nf">Spec</span><span class="p">(</span><span class="n">Element</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">GiveAbility</span><span class="p">(</span><span class="n">Spec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">// Some of the FGameplayAbilitySpec declaration
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">USTRUCT</span><span class="p">(</span><span class="n">BlueprintType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">GAMEPLAYABILITIES_API</span> <span class="nl">FGameplayAbilitySpec</span> <span class="p">:</span> <span class="k">public</span> <span class="n">FFastArraySerializerItem</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">GENERATED_USTRUCT_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">FGameplayAbilitySpec</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="n">Ability</span><span class="p">(</span><span class="k">nullptr</span><span class="p">),</span> <span class="n">Level</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">InputID</span><span class="p">(</span><span class="n">INDEX_NONE</span><span class="p">),</span> <span class="n">SourceObject</span><span class="p">(</span><span class="k">nullptr</span><span class="p">),</span> <span class="n">ActiveCount</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span> <span class="n">InputPressed</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span> <span class="n">RemoveAfterActivation</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span> <span class="n">PendingRemove</span><span class="p">(</span><span class="nb">false</span><span class="p">),</span> <span class="n">bActivateOnce</span><span class="p">(</span><span class="nb">false</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="cm">/** Version that takes an ability class */</span>
</span></span><span class="line"><span class="cl">    <span class="n">FGameplayAbilitySpec</span><span class="p">(</span><span class="n">TSubclassOf</span><span class="o">&lt;</span><span class="n">UGameplayAbility</span><span class="o">&gt;</span> <span class="n">InAbilityClass</span><span class="p">,</span> <span class="n">int32</span> <span class="n">InLevel</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">int32</span> <span class="n">InInputID</span> <span class="o">=</span> <span class="n">INDEX_NONE</span><span class="p">,</span> <span class="n">UObject</span><span class="o">*</span> <span class="n">InSourceObject</span> <span class="o">=</span> <span class="k">nullptr</span><span class="p">);</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Once registered, you can access the granted abilities through the <code>FGameplayAbilitySpecContainer ActivatableAbilities</code> within the component.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="c1">// AbilitySystemComponent.h
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="n">UPROPERTY</span><span class="p">(</span><span class="n">ReplicatedUsing</span><span class="o">=</span><span class="n">OnRep_ActivateAbilities</span><span class="p">,</span> <span class="n">BlueprintReadOnly</span><span class="p">,</span> <span class="n">Category</span> <span class="o">=</span> <span class="s">&#34;Abilities&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">FGameplayAbilitySpecContainer</span> <span class="n">ActivatableAbilities</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="cm">/** Returns the list of all activatable abilities. Read-only. */</span>
</span></span><span class="line"><span class="cl"><span class="k">const</span> <span class="n">TArray</span><span class="o">&lt;</span><span class="n">FGameplayAbilitySpec</span><span class="o">&gt;&amp;</span> <span class="n">GetActivatableAbilities</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ActivatableAbilities</span><span class="p">.</span><span class="n">Items</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="cm">/** Returns the list of all activatable abilities. */</span>
</span></span><span class="line"><span class="cl"><span class="n">TArray</span><span class="o">&lt;</span><span class="n">FGameplayAbilitySpec</span><span class="o">&gt;&amp;</span> <span class="n">GetActivatableAbilities</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ActivatableAbilities</span><span class="p">.</span><span class="n">Items</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>In various ability triggering methods, you will notice that a structure called FGameplayAbilitySpecHandle is used as an argument. This is because the GameplayAbility system was designed to handle abilities and related structures as follows:</p>
<ul>
<li><strong>FGameplayAbilitySpec</strong>: A structure that represents the ability itself. It contains information about the ability&rsquo;s state, activation count, etc.</li>
<li><strong>FGameplayAbilitySpecHandle</strong>: A structure used to uniquely identify a granted ability. One is created for each type of GameplayAbility.</li>
</ul>
<p>The handle value increments by 1 automatically when a Spec is created.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="cm">/** Handle that points to a specific granted ability. These are globally unique */</span>
</span></span><span class="line"><span class="cl"><span class="n">USTRUCT</span><span class="p">(</span><span class="n">BlueprintType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">struct</span> <span class="nc">FGameplayAbilitySpecHandle</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">GENERATED_USTRUCT_BODY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">FGameplayAbilitySpecHandle</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="o">:</span> <span class="n">Handle</span><span class="p">(</span><span class="n">INDEX_NONE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="cm">/** True if GenerateNewHandle was called on this handle */</span>
</span></span><span class="line"><span class="cl">    <span class="kt">bool</span> <span class="nf">IsValid</span><span class="p">()</span> <span class="k">const</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Handle</span> <span class="o">!=</span> <span class="n">INDEX_NONE</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl"><span class="c1">// truncated part
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="k">private</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">UPROPERTY</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">int32</span> <span class="n">Handle</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="inputid">InputID</h2>
<p>Now let&rsquo;s think about how to bind actions for triggering abilities. If using the traditional InputComponent, you would need to create a method for each action and pass it as an argument to BindAction.</p>
<p>When using GAS, however, you need to activate abilities by using tags, specs, and other methods from the AbilitySystemComponent. It is not practical to create a method for each action as before.</p>
<p>Therefore, the FGameplayAbilitySpec structure has an InputID field. By combining it with EnhancedInputComponent::BindAction, we can achieve universal input processing.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">SetupPlayerInputComponent</span><span class="p">(</span><span class="n">UInputComponent</span><span class="o">*</span> <span class="n">PlayerInputComponent</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Super</span><span class="o">::</span><span class="n">SetupPlayerInputComponent</span><span class="p">(</span><span class="n">PlayerInputComponent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">SetupGASInputComponent</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">SetupGASInputComponent</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">IsValid</span><span class="p">(</span><span class="n">AbilitySystemComponent</span><span class="p">)</span> <span class="o">&amp;&amp;</span> <span class="n">IsValid</span><span class="p">(</span><span class="n">InputComponent</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">auto</span> <span class="n">EnhancedInputComponent</span> <span class="o">=</span> <span class="n">CastChecked</span><span class="o">&lt;</span><span class="n">UEnhancedInputComponent</span><span class="o">&gt;</span><span class="p">(</span><span class="n">InputComponent</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">EnhancedInputComponent</span><span class="o">-&gt;</span><span class="n">BindAction</span><span class="p">(</span><span class="n">JumpAction</span><span class="p">,</span> <span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Triggered</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">OnGASInputPressed</span><span class="p">,</span> <span class="p">(</span><span class="n">int32</span><span class="p">)</span><span class="n">EPLAYERGASINPUTTYPE</span><span class="o">::</span><span class="n">JUMP</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">EnhancedInputComponent</span><span class="o">-&gt;</span><span class="n">BindAction</span><span class="p">(</span><span class="n">JumpAction</span><span class="p">,</span> <span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Completed</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">OnGASInputReleased</span><span class="p">,</span> <span class="p">(</span><span class="n">int32</span><span class="p">)</span><span class="n">EPLAYERGASINPUTTYPE</span><span class="o">::</span><span class="n">JUMP</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">EnhancedInputComponent</span><span class="o">-&gt;</span><span class="n">BindAction</span><span class="p">(</span><span class="n">AttackAction</span><span class="p">,</span> <span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Triggered</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">OnGASInputPressed</span><span class="p">,</span> <span class="p">(</span><span class="n">int32</span><span class="p">)</span><span class="n">EPLAYERGASINPUTTYPE</span><span class="o">::</span><span class="n">ATTACK</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="n">EnhancedInputComponent</span><span class="o">-&gt;</span><span class="n">BindAction</span><span class="p">(</span><span class="n">AttackAction</span><span class="p">,</span> <span class="n">ETriggerEvent</span><span class="o">::</span><span class="n">Completed</span><span class="p">,</span> <span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">OnGASInputReleased</span><span class="p">,</span> <span class="p">(</span><span class="n">int32</span><span class="p">)</span><span class="n">EPLAYERGASINPUTTYPE</span><span class="o">::</span><span class="n">ATTACK</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">OnGASInputPressed</span><span class="p">(</span><span class="n">int32</span> <span class="n">InputID</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">Spec</span> <span class="o">=</span> <span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">FindAbilitySpecFromInputID</span><span class="p">(</span><span class="n">InputID</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">Spec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Spec</span><span class="o">-&gt;</span><span class="n">InputPressed</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">Spec</span><span class="o">-&gt;</span><span class="n">IsActive</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">AbilitySpecInputPressed</span><span class="p">(</span><span class="o">*</span><span class="n">Spec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">TryActivateAbility</span><span class="p">(</span><span class="n">Spec</span><span class="o">-&gt;</span><span class="n">Handle</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">OnGASInputReleased</span><span class="p">(</span><span class="n">int32</span> <span class="n">InputID</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">Spec</span> <span class="o">=</span> <span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">FindAbilitySpecFromInputID</span><span class="p">(</span><span class="n">InputID</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">Spec</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="n">Spec</span><span class="o">-&gt;</span><span class="n">InputPressed</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="p">(</span><span class="n">Spec</span><span class="o">-&gt;</span><span class="n">IsActive</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="n">AbilitySystemComponent</span><span class="o">-&gt;</span><span class="n">AbilitySpecInputReleased</span><span class="p">(</span><span class="o">*</span><span class="n">Spec</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Now once you have created and registered the Jump and Attack abilities and added them to the AbilitySystemComponent, the set actions will be triggered based on user input. Jump ability uses the default GAS plugin class, while the Attack ability class will be created using AbilityTask.</p>
<h2 id="instancingpolicy">InstancingPolicy</h2>
<p>InstancingPolicy determines how the ability is instantiated when executed, limiting what an ability can do in its implementation. The types that can be specified are as follows:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="n">UENUM</span><span class="p">(</span><span class="n">BlueprintType</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">namespace</span> <span class="n">EGameplayAbilityInstancingPolicy</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">enum</span> <span class="nc">Type</span> <span class="o">:</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// This ability is never instanced. Anything that executes the ability is operating on the CDO.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">NonInstanced</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// Each actor gets their own instance of this ability. State can be saved, replication is possible.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">InstancedPerActor</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1">// We instance this ability each time it is executed. Replication possible but not recommended.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="n">InstancedPerExecution</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>For a jump ability like the default class, it is best to follow the policy set by the base class.</p>
<h2 id="ability-task-and-gameplay-cue">Ability Task and Gameplay Cue</h2>
<p>Ability Tasks are executed only while the ability is active, whereas Gameplay Cues are used for tasks that do not directly affect the game. Abilities are triggered only once during one frame. For tasks that last over time, Ability Tasks and Gameplay Cues are utilized.
Ability tasks are used for tasks that directly impact the game, such as animations, root motion movement, response to attribute changes, and response to input.
Gameplay Cues are used for tasks that do not directly impact the game, like SFX, VFX, and Camera Shake.</p>
<p>In this post, we will create an Attack ability that plays the attack animation using an Ability Task. We will use the UAbilityTask_PlayMontageAndWait to play the animation.
Following the outlined pattern, we will create the ability task, bind callback functions in the ability class, use ReadyForActivation method to ensure the task can execute, and end the ability by calling EndAbility when the delegate is invoked.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UABGA_Attack</span><span class="o">::</span><span class="n">ActivateAbility</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayAbilitySpecHandle</span> <span class="n">Handle</span><span class="p">,</span> <span class="k">const</span> <span class="n">FGameplayAbilityActorInfo</span><span class="o">*</span> <span class="n">ActorInfo</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">FGameplayAbilityActivationInfo</span> <span class="n">ActivationInfo</span><span class="p">,</span> <span class="k">const</span> <span class="n">FGameplayEventData</span><span class="o">*</span> <span class="n">TriggerEventData</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Super</span><span class="o">::</span><span class="n">ActivateAbility</span><span class="p">(</span><span class="n">Handle</span><span class="p">,</span> <span class="n">ActorInfo</span><span class="p">,</span> <span class="n">ActivationInfo</span><span class="p">,</span> <span class="n">TriggerEventData</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">Character</span> <span class="o">=</span> <span class="n">CastChecked</span><span class="o">&lt;</span><span class="n">AABCharacterBase</span><span class="o">&gt;</span><span class="p">(</span><span class="n">ActorInfo</span><span class="o">-&gt;</span><span class="n">AvatarActor</span><span class="p">.</span><span class="n">Get</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">Character</span><span class="o">-&gt;</span><span class="n">GetCharacterMovement</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SetMovementMode</span><span class="p">(</span><span class="n">EMovementMode</span><span class="o">::</span><span class="n">MOVE_None</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="n">UAbilityTask_PlayMontageAndWait</span><span class="o">*</span> <span class="n">PlayerAttackTask</span> <span class="o">=</span> <span class="n">UAbilityTask_PlayMontageAndWait</span><span class="o">::</span><span class="n">CreatePlayMontageAndWaitProxy</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="k">this</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="n">FName</span><span class="p">(</span><span class="s">&#34;PlayAttack&#34;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">        <span class="n">Character</span><span class="o">-&gt;</span><span class="n">GetComboActionMontage</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">PlayerAttackTask</span><span class="o">-&gt;</span><span class="n">OnCompleted</span><span class="p">.</span><span class="n">AddDynamic</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">OnActionComplete</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">PlayerAttackTask</span><span class="o">-&gt;</span><span class="n">OnCompleted</span><span class="p">.</span><span class="n">AddDynamic</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ThisClass</span><span class="o">::</span><span class="n">OnActionInterrupted</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="n">PlayerAttackTask</span><span class="o">-&gt;</span><span class="n">ReadyForActivation</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UABGA_Attack</span><span class="o">::</span><span class="n">EndAbility</span><span class="p">(</span><span class="k">const</span> <span class="n">FGameplayAbilitySpecHandle</span> <span class="n">Handle</span><span class="p">,</span> <span class="k">const</span> <span class="n">FGameplayAbilityActorInfo</span><span class="o">*</span> <span class="n">ActorInfo</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="k">const</span> <span class="n">FGameplayAbilityActivationInfo</span> <span class="n">ActivationInfo</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bReplicateEndAbility</span><span class="p">,</span> <span class="kt">bool</span> <span class="n">bWasCancelled</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Super</span><span class="o">::</span><span class="n">EndAbility</span><span class="p">(</span><span class="n">Handle</span><span class="p">,</span> <span class="n">ActorInfo</span><span class="p">,</span> <span class="n">ActivationInfo</span><span class="p">,</span> <span class="n">bReplicateEndAbility</span><span class="p">,</span> <span class="n">bWasCancelled</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="k">auto</span> <span class="n">Character</span> <span class="o">=</span> <span class="n">CastChecked</span><span class="o">&lt;</span><span class="n">AABCharacterBase</span><span class="o">&gt;</span><span class="p">(</span><span class="n">ActorInfo</span><span class="o">-&gt;</span><span class="n">AvatarActor</span><span class="p">.</span><span class="n">Get</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">    <span class="n">Character</span><span class="o">-&gt;</span><span class="n">GetCharacterMovement</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">SetMovementMode</span><span class="p">(</span><span class="n">EMovementMode</span><span class="o">::</span><span class="n">MOVE_Walking</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UABGA_Attack</span><span class="o">::</span><span class="n">OnActionComplete</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">EndAbility</span><span class="p">(</span><span class="n">CurrentSpecHandle</span><span class="p">,</span> <span class="n">CurrentActorInfo</span><span class="p">,</span> <span class="n">CurrentActivationInfo</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="nb">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">UABGA_Attack</span><span class="o">::</span><span class="n">OnActionInterrupted</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">EndAbility</span><span class="p">(</span><span class="n">CurrentSpecHandle</span><span class="p">,</span> <span class="n">CurrentActorInfo</span><span class="p">,</span> <span class="n">CurrentActivationInfo</span><span class="p">,</span> <span class="nb">true</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="debugging">Debugging</h2>
<p>If you have succeeded in handling inputs, you should now see the desired actions (jump, attack) being triggered based on the user&rsquo;s input. If not, it is necessary to determine where the bug occurred. To do this, add gameplay tags to the abilities and call the console command <code>showdebug abilitysystem</code> to display it in the PIE viewport when the AbilitySystemComponent is initialized via cpp.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-c++" data-lang="c++"><span class="line"><span class="cl"><span class="kt">void</span> <span class="n">AABGASCharacterPlayer</span><span class="o">::</span><span class="n">PossessedBy</span><span class="p">(</span><span class="n">AController</span><span class="o">*</span> <span class="n">NewController</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="n">Super</span><span class="o">::</span><span class="n">PossessedBy</span><span class="p">(</span><span class="n">NewController</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    
</span></span><span class="line"><span class="cl">    <span class="cp">#if WITH_EDITOR
</span></span></span><span class="line"><span class="cl"><span class="cp"></span>    <span class="k">auto</span> <span class="n">PlayerController</span> <span class="o">=</span> <span class="n">CastChecked</span><span class="o">&lt;</span><span class="n">APlayerController</span><span class="o">&gt;</span><span class="p">(</span><span class="n">NewController</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">IsLocallyControlled</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="n">PlayerController</span><span class="o">-&gt;</span><span class="n">ConsoleCommand</span><span class="p">(</span><span class="n">TEXT</span><span class="p">(</span><span class="s">&#34;showdebug abilitysystem&#34;</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">    <span class="cp">#endif
</span></span></span><span class="line"><span class="cl"><span class="cp"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="final-result">Final Result</h2>
<center>
<p><img src="/img/post/gas/debug.gif"
	
	
	
	loading="lazy"
	
		alt="debug.gif"
	
	
></p>
</center>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/en/tags/unreal/">Unreal</a>
        
            <a href="/en/tags/%EC%96%B8%EB%A6%AC%EC%96%BC/">언리얼</a>
        
            <a href="/en/tags/ue/">UE</a>
        
            <a href="/en/tags/gas/">GAS</a>
        
            <a href="/en/tags/ability/">Ability</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
</article>

    

    

<aside class="related-content--wrapper">
    <h2 class="section-title"></h2>
    <div class="related-content">
        <div class="flex article-list--tile">
            
                
<article class="has-image">
    <a href="/en/p/unreal-gas-start/">
        
        
            <div class="article-image">
                
                    <img src="/en/p/unreal-gas-start/img/unreal.svg" loading="lazy" data-key="" data-hash="/en/p/unreal-gas-start/img/unreal.svg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Unreal GAS Start</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/en/p/unreal-gas-overview/">
        
        
            <div class="article-image">
                
                    <img src="/en/p/unreal-gas-overview/img/unreal.svg" loading="lazy" data-key="" data-hash="/en/p/unreal-gas-overview/img/unreal.svg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Unreal GAS Overview</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/en/p/unreal-enhanced-input/">
        
        
            <div class="article-image">
                
                    <img src="/en/p/unreal-enhanced-input/img/unreal.svg" loading="lazy" data-key="" data-hash="/en/p/unreal-enhanced-input/img/unreal.svg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Unreal Enhanced Input</h2>
        </div>
    </a>
</article>

            
                
<article class="has-image">
    <a href="/en/p/unreal-smart-pointers/">
        
        
            <div class="article-image">
                
                    <img src="/en/p/unreal-smart-pointers/img/unreal.svg" loading="lazy" data-key="" data-hash="/en/p/unreal-smart-pointers/img/unreal.svg"/>
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Unreal Smart Pointers</h2>
        </div>
    </a>
</article>

            
        </div>
    </div>
</aside>

     
    
        
    

    <footer class="site-footer">
    <section class="copyright">
        &copy; 
        
            2023 - 
        
        2024 Sanghoon, Han
    </section>
    
    <section class="powerby">
         <br />
        
    </section>
</footer>


    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://lib.baomitu.com/photoswipe/4.1.3/photoswipe.min.js"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://lib.baomitu.com/photoswipe/4.1.3/photoswipe-ui-default.min.js"crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://lib.baomitu.com/photoswipe/4.1.3/default-skin/default-skin.min.css"crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://lib.baomitu.com/photoswipe/4.1.3/photoswipe.min.css"crossorigin="anonymous"
            >

            </main>
        </div>
        <script 
                src=""crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
